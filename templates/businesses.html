{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
<h3>Businesses</h3>
{% if admin_mode %}<span class="badge text-bg-secondary">Admin mode</span>{%
endif %}
</div>
{% if admin_mode %}
<div class="card mb-4"><div class="card-body">
<form class="row g-2" method="post"
action="{{ url_for('admin.add_business') }}">
  <div class="col-md-3"><input class="form-control" name="name"
placeholder="Business name" required></div>
<div class="col-md-2"><input class="form-control" name="category"
placeholder="Category" required></div>
<div class="col-md-2"><input class="form-control" name="suburb"
placeholder="Suburb"></div>
<div class="col-md-2"><input class="form-control" name="city"
placeholder="City" value="Durban"></div>
<div class="col-md-3"><input class="form-control" name="province"
placeholder="Province" value="KwaZulu-Natal"></div>
<div class="col-md-2"><input class="form-control" name="employees"
type="number" min="0" placeholder="Employees"></div>
<div class="col-md-2"><input class="form-control" name="annual_revenue"
type="number" min="0" step="0.01" placeholder="Revenue (ZAR)"></div>
<div class="col-md-2"><button class="btn btn-primary w-100"
type="submit">Add</button></div>
</form>
</div></div>
{% endif %}
<table class="table table-hover">
<thead>
<tr><th>ID</th><th>Name</th><th>Category</th><th>Suburb</th><th>City</
th><th>Province</th><th>Employees</th><th>Revenue</th>{% if admin_mode %}<th></
th>{% endif %}</tr>
</thead>
<tbody>
{% for b in businesses %}
<tr>
<td>{{ b.id }}</td>
<td>{{ b.name }}</td>
<td>{{ b.category }}</td>
<td>{{ b.suburb or 'â€”' }}</td>
<td>{{ b.city }}</td>
<td>{{ b.province }}</td>
<td>{{ b.employees }}</td>
<td>R {{ '%.2f'|format(b.annual_revenue) }}</td>
{% if admin_mode %}
<td class="text-end">
<form method="post" action="{{ url_for('admin.delete_business',
biz_id=b.id) }}" onsubmit="return confirm('Delete {{ b.name }}?');">
<button class="btn btn-sm btn-outline-danger" type="submit">Delete</
button>
</form>
</td>
{% endif %}
</tr>
{% endfor %}
  </tbody>
</table>
{% endblock %}
